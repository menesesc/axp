# Environment variables for Worker

# Database
DATABASE_URL="postgresql://user:password@localhost:5432/axp?schema=public"

# Web App URL for notifications
WEB_APP_URL="http://localhost:3000"

# Cloudflare R2
R2_ACCOUNT_ID="your-account-id"
R2_ACCESS_KEY_ID="your-access-key"
R2_SECRET_ACCESS_KEY="your-secret-key"
# R2_BUCKET_NAME es opcional si us√°s multi-bucket (1 bucket por cliente en prefix-map.json)
# Solo se usa como fallback si no hay r2Bucket en prefix-map
R2_BUCKET_NAME="axp-documents"  # OPCIONAL para multi-bucket

# Worker Mode
WORKER_MODE="watcher"  # Options: "watcher" | "processor" | "ocr"

# Watcher Configuration
WEBDAV_DIR="/srv/webdav/data"
PROCESSED_DIR="/srv/webdav/processed"
FAILED_DIR="/srv/webdav/failed"
WATCHER_POLL_INTERVAL="2000"  # milliseconds
FILE_STABLE_CHECKS="3"  # number of size checks before considering file stable

# Processor Configuration
MAX_CONCURRENT_JOBS="5"  # number of queue items to process in parallel
PROCESSOR_POLL_INTERVAL="5000"  # milliseconds
MAX_RETRY_ATTEMPTS="5"  # max retries before marking as ERROR

# OCR Configuration (AWS Textract)
OCR_POLL_INTERVAL="30000"  # milliseconds (30 seconds)
OCR_MAX_CONCURRENT_JOBS="3"  # number of PDFs to process in parallel
TEXTRACT_REGION="us-east-1"  # AWS region for Textract
AWS_ACCESS_KEY_ID="your-aws-access-key"
AWS_SECRET_ACCESS_KEY="your-aws-secret-key"

# Prefix Map
PREFIX_MAP_PATH="/etc/axp/prefix-map.json"  # or relative: ./prefix-map.json

# Supabase
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key"

# Storage (para PDFs)
STORAGE_BUCKET="pdfs"
